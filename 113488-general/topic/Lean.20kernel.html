---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.20kernel.html
---

<h2>Stream: <a href="http://robertylewis.com/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html">Lean kernel</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202983412"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202983412" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Albert ten Napel <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202983412">(Jul 06 2020 at 12:45)</a>:</h4>
<p>Hi everyone, where can I read up on the exact details of the Lean kernel?</p>



<a name="202983974"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202983974" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202983974">(Jul 06 2020 at 12:51)</a>:</h4>
<p>Mario's master thesis is a good read. After that: the source code.</p>



<a name="202984013"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202984013" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202984013">(Jul 06 2020 at 12:51)</a>:</h4>
<p><a href="https://github.com/digama0/lean-type-theory/tags">https://github.com/digama0/lean-type-theory/tags</a></p>



<a name="202984088"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202984088" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202984088">(Jul 06 2020 at 12:52)</a>:</h4>
<p>Note that Mario's thesis is really about the type theory, not about nitty gritty implementation details. Not sure what you're after.</p>



<a name="202984216"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202984216" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Albert ten Napel <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202984216">(Jul 06 2020 at 12:53)</a>:</h4>
<p>Thanks! This thesis is exactly what I was looking for :)</p>



<a name="202989396"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202989396" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202989396">(Jul 06 2020 at 13:38)</a>:</h4>
<p>Out of curiosity, <em>is</em> there something about the nitty gritty implementation details?</p>



<a name="202991356"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202991356" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202991356">(Jul 06 2020 at 13:44)</a>:</h4>
<p>If you look at the code, there are comments and references to papers that different parts are based on but that's pretty much it</p>



<a name="202991610"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202991610" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202991610">(Jul 06 2020 at 13:46)</a>:</h4>
<p>Thanks</p>



<a name="202991651"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202991651" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202991651">(Jul 06 2020 at 13:46)</a>:</h4>
<p>I suppose I should just start reading the C++ code</p>



<a name="202991870"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202991870" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202991870">(Jul 06 2020 at 13:48)</a>:</h4>
<p>Are you looking for any particular information?</p>



<a name="202991972"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202991972" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202991972">(Jul 06 2020 at 13:49)</a>:</h4>
<p>No, mostly curious (I've worked on various more traditional VMs)</p>



<a name="202993018"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/202993018" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#202993018">(Jul 06 2020 at 13:58)</a>:</h4>
<p>But the kernel and the VM are not the same things</p>



<a name="203094401"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/203094401" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#203094401">(Jul 07 2020 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="306293">@Carl Friedrich Bolz-Tereick</span> <br>
There are also implementations of the kernel in Haskell, Scala, and Rust in the form of reference type checkers if you're more familiar with any of those. The Scala one is the most concise, but AFAIK the Rust one is the only one that's been updated to match the kernel changes from Lean 3 to Lean 4. I'm almost done with a specification of the kernel that was written in Lean just for the sake of convenience; I'll post it in the program verification channel probably at the end of the week. IIRC the only thing that isn't in the Rust one yet from Lean 4 is the new reduction procedure for mutual inductives.</p>



<a name="203094633"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/203094633" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#203094633">(Jul 07 2020 at 12:20)</a>:</h4>
<p>If this is useful information for people interested in what the Lean kernel actually does then I don't understand why you want to post it to an obscure stream instead of here.</p>



<a name="203094907"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/203094907" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#203094907">(Jul 07 2020 at 12:23)</a>:</h4>
<p>I didn't know that nanoda already supports the mutual inductives.  (Are there other relevant changes?  At some point there was talk about number literals in the kernel.)  Is there an export tool for Lean 4?</p>



<a name="203094959"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/203094959" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#203094959">(Jul 07 2020 at 12:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  I dunno man it just seemed to fit. I'll put it in general if that's more agreeable.</p>



<a name="203095399"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113488-general/topic/Lean%20kernel/near/203095399" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://robertylewis.com/archive/stream/113488-general/topic/Lean.20kernel.html#203095399">(Jul 07 2020 at 12:29)</a>:</h4>
<p>There's no export tool yet no, but the changes are backwards compatible with a couple of small adjustments like keeping the distinction between dependent/non-dependent recursors and adding the new reduction procedure for recursors and quotients. The C++ one has support for number literals and I think now string literals last time I checked, there are two new declaration types (Theorem and Opaque), a couple of other changes. I can put a summary of the changes in a gist or something if you'd like.</p>



{% endraw %}

<hr><p>Last updated: Jul 19 2020 at 13:42 UTC</p>