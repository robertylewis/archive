---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/noncomputable.html
---

<h2>Stream: <a href="http://robertylewis.com/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html">noncomputable</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="188389789"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188389789" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188389789">(Feb 17 2020 at 16:08)</a>:</h4>
<p>I'm trying</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">to_complex</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">[</span><span class="n">ω</span><span class="o">])</span> <span class="o">:</span> <span class="n">ℂ</span> <span class="o">:=</span> <span class="n">x</span><span class="bp">.</span><span class="n">re</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">im</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">I</span> <span class="bp">*</span> <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span>
</pre></div>


<p>but getting <code>definition 'to_complex' is noncomputable, it depends on 'complex.discrete_field'</code>.<br>
Is there some <code>import</code> or <code>open</code> that will "deal" with this? What are the consequences of ignoring the noncomputability of sqrt?<br>
It looks like an interesting exercise to make <code>real.sqrt</code> computable (looks like there is a proof sketch in the comments of <code>real.sqrt</code>'s definition). Is that worth trying? Is it just a matter of constructing the Cauchy sequence that converges to sqrt(n)?</p>



<a name="188390057"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188390057" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188390057">(Feb 17 2020 at 16:12)</a>:</h4>
<p>The real numbers as implemented in mathlib have no useful computational structure anyways (they are Cauchy sequences without any explicit rate of convergence). You should just put <code>noncomputable theory</code> at the top of your file if you are going to use the reals a lot.</p>



<a name="188391256"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188391256" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188391256">(Feb 17 2020 at 16:29)</a>:</h4>
<p>Thanks!<br>
Are you saying that even if we complete the proof of <code>sqrt_aux_converges</code> sqrt would still be "uncomputable"?</p>



<a name="188391396"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188391396" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188391396">(Feb 17 2020 at 16:31)</a>:</h4>
<p>It would be computable in the sense that Lean wouldn't have the <code>noncomputable</code> tag, but it would not be computable in any practical sense. There is no computable function <code>real -&gt; bool</code> for example, so there's basically nothing you can do with a "computable" function on the current implementation of the reals.</p>



<a name="188391780"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188391780" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188391780">(Feb 17 2020 at 16:37)</a>:</h4>
<p>I think I see :)<br>
Thanks again! (I must say I'm blown away by the support here...)</p>



<a name="188394508"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/188394508" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#188394508">(Feb 17 2020 at 17:16)</a>:</h4>
<p>I tend to not put <code>noncomputable theory</code> at the top of my files, and then every time Lean complains something is noncomputable I just write <code>noncomputable</code> in front of it, so e.g. <code>noncomputable def to_complex ...</code> would also remove the error.</p>



<a name="196719006"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719006" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719006">(May 07 2020 at 01:42)</a>:</h4>
<p>Why for such simple theorems I need the <code>noncomputable</code> in front of the theorems? </p>
<div class="codehilite"><pre><span></span><code><span class="kn">constant</span> <span class="n">Class</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="c1">-- SUMO immediateSubclass</span>
<span class="kn">constant</span> <span class="n">subClass</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="c1">-- SUMO subclass</span>
<span class="kn">constant</span> <span class="n">Inherits</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="kn">constant</span> <span class="n">inhz</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c</span> <span class="n">c</span>
<span class="kn">constant</span> <span class="n">inhs</span> <span class="o">(</span><span class="n">c1</span> <span class="n">c2</span> <span class="n">c3</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">c1</span> <span class="n">c2</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c2</span> <span class="n">c3</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c1</span> <span class="n">c3</span>

<span class="kn">constants</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="o">:</span> <span class="n">Class</span>

<span class="kn">constant</span> <span class="n">human_hominid</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Human</span> <span class="n">Hominid</span>
<span class="kn">constant</span> <span class="n">hominid_entity</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Hominid</span> <span class="n">Entity</span>

<span class="n">noncomputable</span> <span class="kn">theorem</span> <span class="n">test1</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">:=</span>
 <span class="n">inhs</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Hominid</span> <span class="n">human_hominid</span> <span class="o">(</span><span class="n">inhz</span> <span class="n">Hominid</span><span class="o">)</span>

<span class="n">noncomputable</span> <span class="kn">theorem</span> <span class="n">test2</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Entity</span> <span class="o">:=</span>
 <span class="n">inhs</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="n">human_hominid</span> <span class="o">(</span><span class="n">inhs</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="n">Entity</span> <span class="n">hominid_entity</span> <span class="o">(</span><span class="n">inhz</span> <span class="n">Entity</span><span class="o">))</span>
</code></pre></div>


<p>Is it possible, using some tactics, to let Lean come up of the proof terms automatically? That is, to synthesize the proof term?</p>



<a name="196719042"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719042" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719042">(May 07 2020 at 01:43)</a>:</h4>
<p><code>noncomputable</code> has nothing to do with computation in this sense</p>



<a name="196719112"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719112" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719112">(May 07 2020 at 01:44)</a>:</h4>
<p>it's <code>noncomputable</code> because you can't directly execute the proofs because they use undefined constants</p>



<a name="196719141"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719141" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719141">(May 07 2020 at 01:45)</a>:</h4>
<p>undefined constants? but in my example, they are all defined.</p>



<a name="196719144"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719144" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719144">(May 07 2020 at 01:45)</a>:</h4>
<p><code>noncomputable theorem</code> is an indication that you have incorrectly marked a <code>def</code> as a theorem, or you have a type where you wanted a prop. Are <code>subClass</code> and <code>Inherits</code> supposed to be propositions? They are named like such</p>



<a name="196719145"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719145" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719145">(May 07 2020 at 01:45)</a>:</h4>
<p><code>constant</code> is the same as <code>axiom</code></p>



<a name="196719208"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719208" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719208">(May 07 2020 at 01:46)</a>:</h4>
<p>No, subClass is supposed to be a dependent type and Inherits a function.</p>



<a name="196719236"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719236" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719236">(May 07 2020 at 01:47)</a>:</h4>
<p>You may want to consider using <code>variable</code> or <code>parameter</code> here</p>



<a name="196719239"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719239" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719239">(May 07 2020 at 01:47)</a>:</h4>
<p>actually, I would like to be able to have a term like <code>inhs Human Hominid Hominid human_hominid (inhz Hominid)</code> produced automatically for a type <code>Inherits Human Hominid</code></p>



<a name="196719286"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719286" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719286">(May 07 2020 at 01:48)</a>:</h4>
<p>you can probably do that using typeclass inference</p>



<a name="196719362"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719362" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719362">(May 07 2020 at 01:50)</a>:</h4>
<p>Wow! Thank you Mario. Can you give me any reference to understand it better? Probably I have to read <a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html</a>, right?</p>



<a name="196719384"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719384" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719384">(May 07 2020 at 01:51)</a>:</h4>
<p>BTW, nice, I don't need the noncomputable with variables </p>
<div class="codehilite"><pre><span></span><code><span class="kn">constant</span> <span class="n">Class</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="c1">-- SUMO immediateSubclass</span>
<span class="kn">constant</span> <span class="n">subClass</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="c1">-- SUMO subclass</span>
<span class="kn">constant</span> <span class="n">Inherits</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="kn">variable</span> <span class="n">inhz</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c</span> <span class="n">c</span>
<span class="kn">variable</span> <span class="n">inhs</span> <span class="o">(</span><span class="n">c1</span> <span class="n">c2</span> <span class="n">c3</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">c1</span> <span class="n">c2</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c2</span> <span class="n">c3</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c1</span> <span class="n">c3</span>

<span class="kn">variables</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="o">:</span> <span class="n">Class</span>

<span class="kn">variable</span> <span class="n">human_hominid</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Human</span> <span class="n">Hominid</span>
<span class="kn">variable</span> <span class="n">hominid_entity</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Hominid</span> <span class="n">Entity</span>

<span class="kn">theorem</span> <span class="n">test1</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">:=</span>
 <span class="n">inhs</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Hominid</span> <span class="n">human_hominid</span> <span class="o">(</span><span class="n">inhz</span> <span class="n">Hominid</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">test2</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Entity</span> <span class="o">:=</span>
 <span class="n">inhs</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="n">human_hominid</span> <span class="o">(</span><span class="n">inhs</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="n">Entity</span> <span class="n">hominid_entity</span> <span class="o">(</span><span class="n">inhz</span> <span class="n">Entity</span><span class="o">))</span>
</code></pre></div>



<a name="196719490"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719490" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719490">(May 07 2020 at 01:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">constant</span> <span class="n">Class</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="c1">-- SUMO immediateSubclass</span>
<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">subClass</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="c1">-- SUMO subclass</span>
<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">Inherits</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">inhz</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c</span> <span class="n">c</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">inhs</span> <span class="o">(</span><span class="n">c1</span> <span class="n">c2</span> <span class="n">c3</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">[</span><span class="n">Inherits</span> <span class="n">c2</span> <span class="n">c3</span><span class="o">]</span> <span class="o">[</span><span class="n">subClass</span> <span class="n">c1</span> <span class="n">c2</span><span class="o">]</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c1</span> <span class="n">c3</span>

<span class="kn">constants</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="o">:</span> <span class="n">Class</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">human_hominid</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Human</span> <span class="n">Hominid</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">hominid_entity</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Hominid</span> <span class="n">Entity</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test1</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test2</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Entity</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="196719663"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196719663" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196719663">(May 07 2020 at 01:57)</a>:</h4>
<p>thank you. I am getting two errors </p>
<div class="codehilite"><pre><span></span><code><span class="bp">.</span><span class="err">…</span>    <span class="mi">19</span>  <span class="mi">19</span> <span class="n">warning</span>         <span class="kn">definition</span> <span class="err">&#39;</span><span class="n">test1&#39;</span> <span class="n">was</span> <span class="n">incorrectly</span> <span class="n">marked</span> <span class="n">as</span> <span class="n">noncomputable</span> <span class="o">(</span><span class="n">lean</span><span class="bp">-</span><span class="n">checker</span><span class="o">)</span>
<span class="bp">.</span><span class="err">…</span>    <span class="mi">19</span>  <span class="mi">27</span> <span class="n">error</span>           <span class="n">maximum</span> <span class="n">class</span><span class="bp">-</span><span class="kn">instance</span> <span class="n">resolution</span> <span class="n">depth</span> <span class="n">has</span> <span class="n">been</span> <span class="n">reached</span> <span class="o">(</span><span class="n">the</span> <span class="n">limit</span> <span class="n">can</span> <span class="n">be</span> <span class="n">increased</span> <span class="k">by</span> <span class="n">setting</span> <span class="n">option</span> <span class="err">&#39;</span><span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">the</span> <span class="n">class</span><span class="bp">-</span><span class="kn">instance</span> <span class="n">resolution</span> <span class="n">trace</span> <span class="n">can</span> <span class="n">be</span> <span class="n">visualized</span> <span class="k">by</span> <span class="n">setting</span> <span class="n">option</span> <span class="err">&#39;</span><span class="n">trace</span><span class="bp">.</span><span class="n">class_instances&#39;</span><span class="o">)</span>
 <span class="n">state</span><span class="o">:</span>
 <span class="err">⊢</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">(</span><span class="n">lean</span><span class="bp">-</span><span class="n">checker</span><span class="o">)</span>
</code></pre></div>



<a name="196720067"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720067" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720067">(May 07 2020 at 02:05)</a>:</h4>
<p>You won't be able to use a variable for typeclass inference here. Instances have to be <code>def</code>s or <code>constant</code>s</p>



<a name="196720121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720121" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720121">(May 07 2020 at 02:06)</a>:</h4>
<p>The error is because you missed that I swapped the arguments to <code>inhs</code></p>



<a name="196720152"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720152" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720152">(May 07 2020 at 02:07)</a>:</h4>
<p>I make no guarantees about the behavior of this typeclass search, and there are issues with infinite searches if it follows the wrong path</p>



<a name="196720153"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720153" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720153">(May 07 2020 at 02:07)</a>:</h4>
<p>but it works in a pinch</p>



<a name="196720203"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720203" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720203">(May 07 2020 at 02:08)</a>:</h4>
<p>I see. But I copied and pasted your code. So I didn't understand your point about the swapping of the arguments of inhs...</p>



<a name="196720248"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720248" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720248">(May 07 2020 at 02:09)</a>:</h4>
<p>Are you sure? What version of lean are you running</p>



<a name="196720259"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720259" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720259">(May 07 2020 at 02:09)</a>:</h4>
<p>I guessed that you modified your code to look like mine</p>



<a name="196720303"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720303" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720303">(May 07 2020 at 02:10)</a>:</h4>
<p>Oh, I got. Now I have just green marks</p>



<a name="196720318"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720318" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720318">(May 07 2020 at 02:10)</a>:</h4>
<p>but I don't know any version of lean where the <code>noncomputable</code> mark on the def is unnecessary</p>



<a name="196720402"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720402" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720402">(May 07 2020 at 02:12)</a>:</h4>
<p>Hum, I see. So I guess that I can't expect too much from Lean to synthesize proof terms as I was expecting with this approach I was investigating.</p>



<a name="196720430"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720430" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720430">(May 07 2020 at 02:13)</a>:</h4>
<p>there are other ways to do it but they are more complicated</p>



<a name="196720597"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720597" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720597">(May 07 2020 at 02:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">constant</span> <span class="n">Class</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="c1">-- SUMO immediateSubclass</span>
<span class="kn">constant</span> <span class="n">subClass</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="c1">-- SUMO subclass</span>
<span class="kn">constant</span> <span class="n">Inherits</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="kn">constant</span> <span class="n">inhz</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c</span> <span class="n">c</span>
<span class="kn">constant</span> <span class="n">inhs</span> <span class="o">(</span><span class="n">c1</span> <span class="n">c2</span> <span class="n">c3</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">c1</span> <span class="n">c2</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c2</span> <span class="n">c3</span> <span class="bp">→</span> <span class="n">Inherits</span> <span class="n">c1</span> <span class="n">c3</span>

<span class="kn">constants</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="o">:</span> <span class="n">Class</span>

<span class="kn">constant</span> <span class="n">human_hominid</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Human</span> <span class="n">Hominid</span>
<span class="kn">constant</span> <span class="n">hominid_entity</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Hominid</span> <span class="n">Entity</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">prove_subclass</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">human_hominid</span><span class="o">]</span> <span class="bp">&lt;|&gt;</span> <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">hominid_entity</span><span class="o">]</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">prove_inherits</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">inhz</span><span class="o">]</span> <span class="bp">&lt;|&gt;</span> <span class="o">(</span><span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">inhs</span><span class="o">]</span> <span class="bp">&gt;&gt;</span> <span class="n">prove_subclass</span> <span class="bp">&gt;&gt;</span> <span class="n">prove_inherits</span><span class="o">)</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test1</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">prove_inherits</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test2</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Entity</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">prove_inherits</span>
</code></pre></div>



<a name="196720859"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720859" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720859">(May 07 2020 at 02:22)</a>:</h4>
<p>In this article, <a href="https://www.molto-project.eu/sites/default/files/FinalSUMOCNL.pdf" title="https://www.molto-project.eu/sites/default/files/FinalSUMOCNL.pdf">https://www.molto-project.eu/sites/default/files/FinalSUMOCNL.pdf</a>, the authors have an interesting idea of mapping a KIF ontology (a knowledge representation language) to dependent type. They used <a href="https://www.grammaticalframework.org" title="https://www.grammaticalframework.org">https://www.grammaticalframework.org</a> that implements dependent types too. I am trying to adapt their solution to Lean. The idea is to model the taxonomy of classes. Later, I would expect Lean to automatically construct terms that proof a chain of subclasses like  Human &lt; Hominid &lt; CognitiveAgent &lt; Agent &lt; ... &lt; Entity.</p>



<a name="196720960"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196720960" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196720960">(May 07 2020 at 02:24)</a>:</h4>
<p>What impressed me was that I was expecting Lean to have a much more powerful type system. But in GF they were able to easily generate a term for a given type. Page 6 of the article. The command mean: give me a term for the type <code>Inherits Human Hominid</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">gt</span> <span class="bp">-</span><span class="n">cat</span><span class="bp">=</span><span class="s2">&quot;Inherits Human Hominid&quot;</span>
<span class="o">(</span><span class="n">inhs</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Hominid</span> <span class="n">Human_Class</span> <span class="o">(</span><span class="n">inhz</span> <span class="n">Hominid</span><span class="o">))</span>
</code></pre></div>



<a name="196721075"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721075" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721075">(May 07 2020 at 02:26)</a>:</h4>
<p>Oh, sorry I was answering a question that you made in another thread! ;-)</p>



<a name="196721121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721121" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721121">(May 07 2020 at 02:27)</a>:</h4>
<p>Reading the paper, I'm pretty sure you want <code>subClass</code> and <code>Inherits</code> to be props. The reason they use a dependent type is because that's the nearest equivalent to a proposition in a haskell-esque type theory</p>



<a name="196721181"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721181" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721181">(May 07 2020 at 02:28)</a>:</h4>
<p>I think <code>gt -cat</code> is doing something similar to lean's typeclass inference</p>



<a name="196721382"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721382" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721382">(May 07 2020 at 02:33)</a>:</h4>
<p>pages 5-6 read very much like a description of typeclass inference. I'm pretty sure that <code>gt -cat</code> is a prolog-like search</p>
<blockquote>
<p>However, there are some types of axioms which could not be ported to SUMOGF, such as the ones that use quantification over classes, negative type declarations and axioms which use the predicates subclass, range or domain.</p>
</blockquote>
<p>...which also predicts that negations in theorems would be problematic to represent this way, because instance search only works with horn clauses (from A , B, ... Y infer Z)</p>



<a name="196721644"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721644" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721644">(May 07 2020 at 02:39)</a>:</h4>
<p>Thank you, I will think more about the implications of moving to propositions. In the previous example of trying to prove a simple SUMO axiom in Lean, I used untyped FOL mapping to Lean - <a href="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean" title="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean">https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean</a>. This makes the simple proof very verbose.  I had a single type <a href="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L21" title="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L21">https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L21</a> and guards in the axioms <a href="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L96" title="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L96">https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean#L96</a>. I am trying to better use types and have a way to move from the class hierarchy to types.  </p>
<p>Anyway, the use of tactics was interesting, thank you for sharing. Unfortunately, we needed to go back to constants and noncomputable...</p>



<a name="196721727"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721727" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721727">(May 07 2020 at 02:41)</a>:</h4>
<p>The reason lean gets lost with the initial version of <code>inhs</code> is because it builds up a stack <code>subclass Human ?a /\ subclass ?a ?b /\ subclass ?b ?c /\ Inherits ?c Hominid -&gt; Inherits Human Hominid</code> that doesn't resolve because it keeps applying <code>inhs</code> to the last <code>Inherits</code> subgoal. It's similar to the left recursion problem in context free grammars</p>



<a name="196721774"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721774" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721774">(May 07 2020 at 02:42)</a>:</h4>
<p>I am curious if GF has the same problem if you stated <code>inhs</code> as <code>Inherits c1 c2 → subClass c2 c3 → Inherits c1 c3</code> instead</p>



<a name="196721855"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196721855" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196721855">(May 07 2020 at 02:44)</a>:</h4>
<p>This is interesting. I moved subclass back to the original position and it is working for me</p>
<div class="codehilite"><pre><span></span><code><span class="kn">constant</span> <span class="n">Class</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="c1">-- SUMO immediateSubclass</span>
<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">subClass</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="c1">-- SUMO subclass</span>
<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">Inherits</span> <span class="o">:</span> <span class="n">Class</span> <span class="bp">→</span> <span class="n">Class</span> <span class="bp">→</span> <span class="kt">Type</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">inhz</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c</span> <span class="n">c</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">inhs</span> <span class="o">(</span><span class="n">c1</span> <span class="n">c2</span> <span class="n">c3</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">[</span><span class="n">subClass</span> <span class="n">c1</span> <span class="n">c2</span><span class="o">]</span> <span class="o">[</span><span class="n">Inherits</span> <span class="n">c2</span> <span class="n">c3</span><span class="o">]</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">c1</span> <span class="n">c3</span>

<span class="kn">constants</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="n">Entity</span> <span class="o">:</span> <span class="n">Class</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">human_hominid</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Human</span> <span class="n">Hominid</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="kn">constant</span> <span class="n">hominid_entity</span> <span class="o">:</span> <span class="n">subClass</span> <span class="n">Hominid</span> <span class="n">Entity</span>

<span class="kn">set_option</span> <span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth</span> <span class="mi">100</span>
<span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">class_instances</span> <span class="n">true</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test1</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Hominid</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">test2</span> <span class="o">:</span> <span class="n">Inherits</span> <span class="n">Human</span> <span class="n">Entity</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="196722128"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196722128" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196722128">(May 07 2020 at 02:50)</a>:</h4>
<p>Unfortunately, I can't test the change in GF, the code in <a href="https://github.com/GrammaticalFramework/gf-contrib/tree/master/SUMO" title="https://github.com/GrammaticalFramework/gf-contrib/tree/master/SUMO">https://github.com/GrammaticalFramework/gf-contrib/tree/master/SUMO</a> is incomplete.</p>



<a name="196722253"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196722253" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196722253">(May 07 2020 at 02:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/noncomputable/near/196720248" title="#narrow/stream/113489-new-members/topic/noncomputable/near/196720248">said</a>:</p>
<blockquote>
<p>Are you sure? What version of lean are you running</p>
</blockquote>
<p>% lean -v<br>
Lean (version 3.4.2, Release)</p>



<a name="196725430"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196725430" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196725430">(May 07 2020 at 04:09)</a>:</h4>
<p><span class="user-mention" data-user-id="121542">@Alexandre Rademaker</span> So I had a go at simplifying your <a href="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean" title="https://github.com/own-pt/common-sense-lean/blob/master/misc/bs.lean">bs.lean</a>, see <a href="https://gist.github.com/digama0/16c62d1af34212de2e3fba380d87c043" title="https://gist.github.com/digama0/16c62d1af34212de2e3fba380d87c043">https://gist.github.com/digama0/16c62d1af34212de2e3fba380d87c043</a> . You can't quite take care of everything with typeclass inference but almost all the proofs that look like typeclass inference can be done using it</p>



<a name="196765225"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196765225" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196765225">(May 07 2020 at 12:53)</a>:</h4>
<p>I see, thank you so much for your attention.  I will read it carefully to understand the details. The main issue, I believe, is to understand the limitations of that approach. The comments <code>not provable</code> in the end means not probable with typeclass inference or not provable at all with this way to model classes and instances? </p>
<p>Still, I think the predicates and functions are not really typed, right? I can't say that <code>partition : Class → Class → Class → Prop</code> and 'using it' like:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">axiom</span> <span class="n">a67131</span> <span class="o">{</span><span class="n">c</span> <span class="n">row0</span> <span class="n">row1</span> <span class="o">:</span> <span class="n">Class</span><span class="o">}</span> <span class="o">:</span>
 <span class="o">(</span><span class="n">partition3</span> <span class="n">c</span> <span class="n">row0</span> <span class="n">row1</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">exhaustiveDecomposition3</span> <span class="n">c</span> <span class="n">row0</span> <span class="n">row1</span> <span class="bp">∧</span> <span class="n">disjointDecomposition3</span> <span class="n">c</span> <span class="n">row0</span> <span class="n">row1</span><span class="o">))</span>
</code></pre></div>


<p>That is, I can't really internalize the class hierarchy in the types.</p>
<p>In Lean 3.4.2 almost all proofs reached the maximum class-instance resolution depth, and I set it to 1000.</p>



<a name="196975218"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196975218" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196975218">(May 09 2020 at 05:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121542">Alexandre Rademaker</span> <a href="#narrow/stream/113489-new-members/topic/noncomputable/near/196765225" title="#narrow/stream/113489-new-members/topic/noncomputable/near/196765225">said</a>:</p>
<blockquote>
<p>I see, thank you so much for your attention.  I will read it carefully to understand the details. The main issue, I believe, is to understand the limitations of that approach. The comments <code>not provable</code> in the end means not probable with typeclass inference or not provable at all with this way to model classes and instances? </p>
</blockquote>
<p>Not provable from the axioms that were provided. Presumably you have omitted some axioms that are needed to prove these.</p>



<a name="196975285"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noncomputable/near/196975285" class="zl"><img src="http://robertylewis.com/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://robertylewis.com/archive/stream/113489-new-members/topic/noncomputable.html#196975285">(May 09 2020 at 05:47)</a>:</h4>
<p>Indeed, these predicates and functions are essentially untyped, and typeclass inference is having to solve a harder problem than it normally would because there are so few classes and so many instances. One simple way to improve this is to have one typeclass per property and try to minimize the number of two-argument typeclasses. And things like <code>ins x Class</code> are really calling out for a <code>Class</code> type as you indicate, which would eliminate the need to do any type class search, although you still have to do something about subtyping.</p>



{% endraw %}

<hr><p>Last updated: Jul 19 2020 at 13:42 UTC</p>